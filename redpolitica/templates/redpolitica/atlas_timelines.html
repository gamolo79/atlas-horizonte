{% load static %}
<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <title>Atlas · Timelines</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{% static 'css/atlas-design-system.css' %}">
</head>

<body class="timeline-body">
  <div class="page">
    <header>
      <div class="header-inner">
        <div class="header-row">
          <a class="brand" href="{% url 'atlas-home' %}">
            <img src="{% static 'img/logo-horizonte-atlas.png' %}" alt="Atlas" class="brand-logo">
            <div class="brand-texts">
              <div class="brand-text-main">Atlas · Timelines</div>
              <div class="brand-text-sub">Personas e instituciones</div>
            </div>
          </a>
        </div>
        <div class="header-row header-row-nav">
          <nav class="chips-row" aria-label="Navegación de Atlas">
            <a class="chip-link" href="{% url 'atlas-home' %}">Home</a>
            <a class="chip-link" href="{% url 'atlas-personas-list' %}">Personas</a>
            <a class="chip-link" href="{% url 'atlas-instituciones-list' %}">Instituciones</a>
            <a class="chip-link" href="{% url 'atlas-topics-list' %}">Temas</a>
            <a class="chip-link" href="javascript:history.back()">Regresar</a>
          </nav>
        </div>
      </div>
    </header>

    <main>
      <div class="main-inner">
        <div class="timeline-app">
          <div class="timeline-topbar timeline-header-card">
            <div>
              <div class="page-title">Atlas · Timelines</div>
              <div class="page-subtitle">Explora periodos y cargos por actor.</div>
            </div>
            <div class="timeline-controls">
              <div class="timeline-control">
                <label class="timeline-control-label" for="entityType">Entidad</label>
                <select id="entityType" class="select-input">
                  <option value="persona">Persona</option>
                  <option value="institucion">Institución</option>
                </select>
              </div>

              <div class="timeline-control">
                <label class="timeline-control-label" for="entitySelect">Selecciona</label>
                <select id="entitySelect" class="select-input"></select>
              </div>

              <button class="btn btn-primary" id="btnToday">Ir a hoy</button>
            </div>
          </div>

          <div class="timeline-panel" id="timelinePanel">
            <div class="timeline-panel-header">
              <div class="timeline-titleblock">
                <h2 id="headline">Timeline</h2>
                <div class="timeline-meta">
                  <span class="timeline-chip"><span class="timeline-dot"></span><span id="subhead">Selecciona una
                      entidad para ver cargos por periodo</span></span>
                  <span class="timeline-chip">Eje: años + 12 meses</span>
                  <span class="timeline-chip">Empalmes: apilado vertical</span>
                </div>
              </div>

              <div class="timeline-legend">
                <span class="timeline-swatch"><i style="background:#7aa2ff"></i> Federal</span>
                <span class="timeline-swatch"><i style="background:#6ee7b7"></i> Estatal</span>
                <span class="timeline-swatch"><i style="background:#fbbf24"></i> Municipal</span>
                <span class="timeline-swatch"><i style="background:#c084fc"></i> Partidista</span>
                <span class="timeline-swatch"><i style="background:#94a3b8"></i> Otro</span>
              </div>
            </div>

            <div class="timeline-wrap">
              <div class="timeline-scroller" id="scroller">
                <div class="timeline-canvas" id="canvas">
                  <div class="timeline-grid" id="grid"></div>
                  <div class="timeline-rows" id="rows"></div>
                </div>
              </div>
              <div class="timeline-footer-note">
                Tip: pasa el mouse sobre una barra para ver el tooltip. En móvil, toca una barra.
              </div>
            </div>
            <div class="timeline-tooltip" id="tooltip" role="tooltip" aria-hidden="true"></div>
          </div>
        </div>
      </div>
    </main>

    <footer>
      Horizonte Digital · Atlas · <a href="{% url 'privacy-notice' %}">Aviso de privacidad</a> · <a
        href="{% url 'terms-conditions' %}">Términos y condiciones</a>
    </footer>
  </div>

  {{ timeline_data|json_script:"timeline-data" }}
  <script src="{% static 'js/atlas/timelines.js' %}" defer></script>
</body>

</html>
