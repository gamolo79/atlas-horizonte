{% extends "sintesis/base.html" %}

{% block title %}Síntesis · Inicio{% endblock %}

{% block content %}
  <div class="grid cols">
    <div class="card">
      <h2>Clientes activos</h2>
      <p class="muted">Selecciona un cliente para revisar sus intereses y síntesis recientes.</p>
      <div class="list">
        {% for client in clients %}
          <a class="item" href="{% url 'sintesis:client_detail' client.id %}">
            <div>
              <div class="title">{{ client.name }}</div>
              <div class="meta">{% if client.persona %}Persona{% elif client.institucion %}Institución{% else %}Cliente{% endif %}</div>
            </div>
            <span class="pill good">Activo</span>
          </a>
        {% empty %}
          <div class="item">
            <div>
              <div class="title">Aún no hay clientes</div>
              <div class="meta">Crea tu primer cliente desde el panel de clientes.</div>
            </div>
          </div>
        {% endfor %}
      </div>
    </div>

    <div class="card">
      <h2>Acciones rápidas</h2>
      <p class="muted">Accesos para administrar la agenda o crear nuevos clientes.</p>
      <div class="row" style="margin-top:10px">
        <a class="btn" href="{% url 'sintesis:clients' %}">Administrar clientes</a>
        <a class="btn ghost" href="{% url 'sintesis:procesos' %}">Programar procesos</a>
      </div>
      <div class="item" style="margin-top:14px">
        <div>
          <div class="title">Estado del módulo</div>
          <div class="meta">Integra las menciones y etiquetas de Monitor para crear síntesis automáticas.</div>
        </div>
      </div>
    </div>
  </div>

  <div class="card" style="margin-top:16px">
    <h2>Síntesis recientes</h2>
    <div class="list">
      {% for story in stories %}
        <div class="item">
          <div>
            <div class="title">{{ story.title }}</div>
            <div class="meta">{{ story.summary }}</div>
            <div class="meta">{{ story.article_count }} notas · {{ story.client.name }}</div>
          </div>
          <div class="chips">
            {% for item in story.story_articles.all %}
              <span class="chip"><a href="{{ item.source_url }}" target="_blank">{{ item.source_name }}</a></span>
            {% endfor %}
          </div>
        </div>
      {% empty %}
        <div class="item">
          <div>
            <div class="title">Sin síntesis todavía</div>
            <div class="meta">Cuando ejecutes un proceso aparecerán aquí.</div>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
{% endblock %}
