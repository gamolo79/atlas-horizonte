<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Monitor · Dashboards</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    :root{
      --bg:#0b0f14;
      --panel:#0f1722;
      --panel2:#0c1420;
      --stroke:rgba(166,190,200,.16);
      --text:#e7eef5;
      --muted:rgba(231,238,245,.70);

      --g:#19c37d;
      --g2:#0fb36f;

      --neg:#ff4d4d;
      --neu:#9fb2be;
      --pos:#19c37d;

      --r:18px;
      --shadow:0 14px 40px rgba(0,0,0,.45);
      --max:1160px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;font-family:Lexend,system-ui;
      background:radial-gradient(1100px 600px at 15% 0%, rgba(25,195,125,.10), transparent 55%),
                 radial-gradient(900px 500px at 85% 15%, rgba(15,179,111,.10), transparent 60%),
                 var(--bg);
      color:var(--text);
    }
    a{color:inherit;text-decoration:none}
    .wrap{max-width:var(--max);margin:0 auto;padding:18px}
    .topbar{
      display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap;
      padding:14px 16px;border:1px solid var(--stroke);border-radius:var(--r);
      background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.01));
      box-shadow:var(--shadow);
    }
    .brand{display:flex;align-items:center;gap:12px}
    .brand img{height:34px}
    .brand .t{font-weight:800}
    .brand .s{font-size:12px;color:var(--muted);margin-top:2px}
    .nav{display:flex;gap:8px;flex-wrap:wrap}
    .chip{
      padding:10px 12px;border-radius:999px;border:1px solid var(--stroke);
      background:rgba(255,255,255,.02);
      font-size:13px;color:var(--muted);
    }
    .chip.active{color:var(--text);border-color:rgba(25,195,125,.35);background:rgba(25,195,125,.10)}
    .grid{display:grid;gap:14px;margin-top:14px}
    .grid.cols{grid-template-columns:1.55fr .75fr}
    @media(max-width:980px){.grid.cols{grid-template-columns:1fr}}
    .card{
      border:1px solid var(--stroke);
      background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.01));
      border-radius:var(--r);
      box-shadow:var(--shadow);
      padding:14px;
    }
    h2{margin:0 0 10px 0;font-size:16px;letter-spacing:.2px}
    .muted{color:var(--muted);font-size:12px;line-height:1.5}
    .filters{
      display:grid;grid-template-columns:1fr 1fr 1fr 1fr;gap:10px;
      margin-top:12px;
    }
    @media(max-width:980px){.filters{grid-template-columns:1fr 1fr}}
    @media(max-width:520px){.filters{grid-template-columns:1fr}}
    label{display:block;font-size:12px;color:var(--muted);margin-bottom:6px}
    input, select{
      width:100%;
      border:1px solid var(--stroke);
      border-radius:14px;
      background:rgba(0,0,0,.20);
      color:var(--text);
      padding:10px 12px;
      font-size:13px;
      outline:none;
    }
    .row{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    .btn{
      padding:10px 12px;border-radius:14px;border:1px solid var(--stroke);
      background:rgba(25,195,125,.12);
      font-weight:800;font-size:13px;
    }
    .btn.ghost{background:rgba(255,255,255,.02);color:var(--muted);font-weight:500}
    .kpis{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin-top:12px}
    @media(max-width:980px){.kpis{grid-template-columns:repeat(2,1fr)}}
    .kpi{padding:12px;border-radius:14px;background:rgba(0,0,0,.16);border:1px solid var(--stroke)}
    .kpi .l{font-size:12px;color:var(--muted)}
    .kpi .v{font-size:22px;font-weight:800;margin-top:4px}
    .kpi .d{font-size:12px;color:var(--muted);margin-top:6px}
    .kpi .d b{color:var(--g)}
    .split{display:grid;grid-template-columns:1fr 1fr;gap:14px;margin-top:14px}
    @media(max-width:980px){.split{grid-template-columns:1fr}}
    canvas{width:100% !important;height:340px !important}
    .tag-cloud{
      display:flex;flex-wrap:wrap;gap:8px;margin-top:10px
    }
    .tag{
      border:1px solid var(--stroke);border-radius:999px;
      padding:6px 10px;background:rgba(0,0,0,.16);
      font-size:12px;color:var(--muted);
    }
    .tag.big{font-size:14px;color:var(--text);border-color:rgba(25,195,125,.35);background:rgba(25,195,125,.10)}
    .tag.pos{border-color:rgba(25,195,125,.35);color:var(--text);background:rgba(25,195,125,.08)}
    .tag.neu{border-color:rgba(159,178,190,.35);color:var(--text);background:rgba(159,178,190,.08)}
    .tag.neg{border-color:rgba(255,77,77,.35);color:var(--text);background:rgba(255,77,77,.08)}
    .clusters{display:flex;flex-direction:column;gap:10px;margin-top:10px}
    .cluster{
      border:1px solid var(--stroke);border-radius:14px;background:rgba(0,0,0,.16);
      padding:12px;
    }
    .cluster .head{display:flex;justify-content:space-between;gap:10px;align-items:flex-start}
    .cluster .name{font-weight:800;font-size:13px}
    .pill{
      padding:6px 10px;border-radius:999px;border:1px solid var(--stroke);
      background:rgba(255,255,255,.02);color:var(--muted);font-size:12px;white-space:nowrap
    }
    .pill.pos{border-color:rgba(25,195,125,.35);background:rgba(25,195,125,.10);color:var(--text)}
    .pill.neu{border-color:rgba(159,178,190,.35);background:rgba(159,178,190,.08);color:var(--text)}
    .pill.neg{border-color:rgba(255,77,77,.35);background:rgba(255,77,77,.08);color:var(--text)}
    .cluster .mini{margin-top:8px;display:flex;flex-wrap:wrap;gap:6px}
    .mini .tag{padding:5px 9px}
  </style>
</head>
<body>
  <div class="wrap">

    <header class="topbar">
      <div class="brand">
        <img src="logo-horizonte-monitor.png" alt="Horizonte Digital Monitor">
        <div>
          <div class="t">Dashboards</div>
          <div class="s">Explora cobertura por persona, institución o tema</div>
        </div>
      </div>
      <nav class="nav">
        <a class="chip" href="monitor-home.html">Home</a>
        <a class="chip" href="monitor-feed.html">Monitor</a>
        <a class="chip active" href="#">Dashboards</a>
        <a class="chip" href="benchmarks.html">Benchmarks</a>
        <a class="chip" href="revision.html">Revisión</a>
        <a class="chip" href="procesos.html">Procesos</a>
        <a class="chip" href="fuentes.html">Fuentes</a>
      </nav>
    </header>

    <!-- Encabezado + filtros -->
    <section class="card">
      <h2>Filtro principal</h2>
      <div class="muted">
        1) Elige el tipo de entidad → 2) busca y selecciona la entidad → 3) define el rango y la granularidad (día/semana/mes).
      </div>

      <div class="filters">
        <div>
          <label>Tipo de entidad</label>
          <select id="entityType">
            <option value="persona" selected>Persona</option>
            <option value="institucion">Institución</option>
            <option value="tema">Tema</option>
          </select>
        </div>

        <div>
          <label>Búsqueda</label>
          <input id="searchBox" placeholder="Escribe para filtrar la lista…">
        </div>

        <div>
          <label>Entidad</label>
          <select id="entitySelect">
            <option>Mauricio Kuri</option>
            <option>Municipio de Corregidora</option>
            <option>Congreso de Querétaro</option>
            <option>Seguridad</option>
          </select>
        </div>

        <div>
          <label>Rango</label>
          <select id="rangeSelect">
            <option selected>Últimos 7 días</option>
            <option>Últimos 30 días</option>
            <option>Últimos 90 días</option>
            <option>Este año</option>
            <option>Personalizado…</option>
          </select>
        </div>

        <div>
          <label>Granularidad</label>
          <select id="grainSelect">
            <option value="dia">Día</option>
            <option value="semana" selected>Semana</option>
            <option value="mes">Mes</option>
          </select>
        </div>

        <div>
          <label>Fuente</label>
          <select>
            <option selected>Todas</option>
            <option>Update Me</option>
            <option>El Queretano</option>
            <option>Periodismo.media</option>
          </select>
        </div>

        <div>
          <label>Tipo de nota</label>
          <select>
            <option selected>Todas</option>
            <option>Informativo</option>
            <option>Opinión</option>
          </select>
        </div>

        <div>
          <label>Sentimiento</label>
          <select>
            <option selected>Todos</option>
            <option>Positivo</option>
            <option>Neutro</option>
            <option>Negativo</option>
          </select>
        </div>
      </div>

      <div class="row">
        <button class="btn">Aplicar</button>
        <button class="btn ghost">Limpiar</button>
        <button class="btn ghost">Guardar vista</button>
      </div>

      <div class="kpis">
        <div class="kpi">
          <div class="l">Notas en rango</div>
          <div class="v">124</div>
          <div class="d">Promedio semanal: <b>+9</b></div>
        </div>
        <div class="kpi">
          <div class="l">Negativas</div>
          <div class="v">22%</div>
          <div class="d">Tendencia: <b>↑</b></div>
        </div>
        <div class="kpi">
          <div class="l">Opinión</div>
          <div class="v">15%</div>
          <div class="d">Tendencia: <b>↔</b></div>
        </div>
        <div class="kpi">
          <div class="l">Etiquetas únicas</div>
          <div class="v">68</div>
          <div class="d">Top 5 concentran: <b>31%</b></div>
        </div>
      </div>
    </section>

    <!-- Dispersión + Resumen -->
    <section class="grid cols">
      <div class="card">
        <h2>Volumen como dispersión (cada punto = una nota)</h2>
        <div class="muted">
          Eje X: tiempo · Eje Y: “altura” por acumulación en el periodo (cuando hay más notas, suben).
          Colores: verde/positivo, gris/neutro, rojo/negativo. Tooltip: título + enlace.
        </div>
        <div style="height:10px"></div>
        <canvas id="scatterNotes"></canvas>

        <div class="row">
          <button class="btn ghost">Ver lista de notas</button>
          <button class="btn ghost">Descargar CSV</button>
        </div>
      </div>

      <div class="card">
        <h2>Resumen del rango</h2>
        <div class="split" style="margin-top:10px">
          <div>
            <div class="muted">Sentimiento (proporción)</div>
            <canvas id="donutSent"></canvas>
          </div>
          <div>
            <div class="muted">Tipo de nota</div>
            <canvas id="donutType"></canvas>
          </div>
        </div>

        <div style="height:12px"></div>
        <h2>Top fuentes</h2>
        <div class="clusters">
          <div class="cluster">
            <div class="head">
              <div>
                <div class="name">El Queretano</div>
                <div class="muted">34 notas · 7 días</div>
              </div>
              <span class="pill neu">Tono: neutro</span>
            </div>
          </div>
          <div class="cluster">
            <div class="head">
              <div>
                <div class="name">Update Me</div>
                <div class="muted">28 notas · 7 días</div>
              </div>
              <span class="pill pos">Tono: positivo</span>
            </div>
          </div>
          <div class="cluster">
            <div class="head">
              <div>
                <div class="name">Periodismo.media</div>
                <div class="muted">12 notas · 7 días</div>
              </div>
              <span class="pill neg">Tono: negativo</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Etiquetas IA: nube + clusters -->
    <section class="grid cols">
      <div class="card">
        <h2>Etiquetas IA (nube)</h2>
        <div class="muted">Tamaño = repetición en el rango. Color = sentimiento dominante en notas que usan esa etiqueta.</div>
        <div class="tag-cloud">
          <span class="tag big pos">seguridad digital</span>
          <span class="tag big neu">fraude</span>
          <span class="tag big neg">crítica</span>
          <span class="tag pos">prevención</span>
          <span class="tag neu">talleres</span>
          <span class="tag neg">denuncias</span>
          <span class="tag neu">ciberdelito</span>
          <span class="tag neu">policía cibernética</span>
          <span class="tag pos">capacitación</span>
          <span class="tag neu">empresas</span>
          <span class="tag neu">escuelas</span>
          <span class="tag neg">extorsión</span>
        </div>

        <div class="row">
          <button class="btn ghost">Ver etiquetas completas</button>
          <button class="btn ghost">Filtrar por etiqueta</button>
        </div>
      </div>

      <div class="card">
        <h2>Agrupación de etiquetas (clusters de historia)</h2>
        <div class="muted">
          Agrupa etiquetas que aparecen juntas con frecuencia. Esto ayuda a identificar “historias” sin reescribir nada.
        </div>

        <div class="clusters">
          <div class="cluster">
            <div class="head">
              <div>
                <div class="name">Historia: ciberfraude y robo de datos</div>
                <div class="muted">31 notas · 8 etiquetas principales</div>
              </div>
              <span class="pill neu">Tono: neutro</span>
            </div>
            <div class="mini">
              <span class="tag neu">robo de datos</span>
              <span class="tag neu">fraude</span>
              <span class="tag neu">ciberdelito</span>
              <span class="tag neu">suplantación</span>
              <span class="tag neg">extorsión</span>
              <span class="tag pos">prevención</span>
              <span class="tag neu">reportes</span>
              <span class="tag neu">seguridad digital</span>
            </div>
          </div>

          <div class="cluster">
            <div class="head">
              <div>
                <div class="name">Historia: talleres y cultura de prevención</div>
                <div class="muted">18 notas · 6 etiquetas principales</div>
              </div>
              <span class="pill pos">Tono: positivo</span>
            </div>
            <div class="mini">
              <span class="tag pos">capacitación</span>
              <span class="tag pos">talleres</span>
              <span class="tag neu">empresas</span>
              <span class="tag neu">escuelas</span>
              <span class="tag neu">comercio seguro</span>
              <span class="tag pos">prevención</span>
            </div>
          </div>

          <div class="cluster">
            <div class="head">
              <div>
                <div class="name">Historia: debate público y críticas</div>
                <div class="muted">12 notas · 5 etiquetas principales</div>
              </div>
              <span class="pill neg">Tono: negativo</span>
            </div>
            <div class="mini">
              <span class="tag neg">crítica</span>
              <span class="tag neg">señalamientos</span>
              <span class="tag neu">oposición</span>
              <span class="tag neu">narrativas</span>
              <span class="tag neg">controversia</span>
            </div>
          </div>
        </div>

        <div class="row">
          <button class="btn">Abrir vista “Historias”</button>
          <button class="btn ghost">Exportar</button>
        </div>
      </div>
    </section>

  </div>

  <script>
    // --- Helpers demo para tooltips con link ---
    const noteLink = (ctx) => {
      const r = ctx.raw || {};
      return r.url ? `\nFuente: ${r.outlet}\n${r.url}` : "";
    };

    // Dispersión: cada punto = 1 nota.
    // Eje X: fecha (timestamp). Eje Y: "altura" por apilado dentro de su bucket temporal.
    // Colores: pos/neu/neg. Orden de apilado: pos (abajo), neu (medio), neg (arriba) -> se logra por asignación de y.
    const now = Date.now();
    const day = 24*60*60*1000;

    // Demo dataset: cada punto incluye metadatos para el tooltip
    const pointsPos = [
      {x: now-6*day, y: 1, title:"Nota positiva 1", url:"#", outlet:"Update Me"},
      {x: now-6*day, y: 2, title:"Nota positiva 2", url:"#", outlet:"El Queretano"},
      {x: now-3*day, y: 1, title:"Nota positiva 3", url:"#", outlet:"Update Me"},
      {x: now-1*day, y: 2, title:"Nota positiva 4", url:"#", outlet:"Update Me"},
    ];
    const pointsNeu = [
      {x: now-6*day, y: 3, title:"Nota neutra 1", url:"#", outlet:"El Queretano"},
      {x: now-3*day, y: 2, title:"Nota neutra 2", url:"#", outlet:"Periodismo.media"},
      {x: now-1*day, y: 3, title:"Nota neutra 3", url:"#", outlet:"El Queretano"},
    ];
    const pointsNeg = [
      {x: now-6*day, y: 4, title:"Nota negativa 1", url:"#", outlet:"Periodismo.media"},
      {x: now-3*day, y: 3, title:"Nota negativa 2", url:"#", outlet:"Periodismo.media"},
      {x: now-1*day, y: 4, title:"Nota negativa 3", url:"#", outlet:"El Queretano"},
    ];

    // Scatter
    const scatter = new Chart(document.getElementById("scatterNotes"),{
      type:"scatter",
      data:{
        datasets:[
          {label:"Positivo", data:pointsPos, pointRadius:5},
          {label:"Neutro", data:pointsNeu, pointRadius:5},
          {label:"Negativo", data:pointsNeg, pointRadius:5},
        ]
      },
      options:{
        parsing:false,
        responsive:true,
        scales:{
          x:{
            type:"time",
            time:{unit:"day"},
            ticks:{color:"rgba(231,238,245,.70)"},
            grid:{color:"rgba(166,190,200,.10)"}
          },
          y:{
            beginAtZero:true,
            ticks:{color:"rgba(231,238,245,.70)"},
            grid:{color:"rgba(166,190,200,.10)"},
            title:{display:true,text:"Acumulación (apilado por periodo)",color:"rgba(231,238,245,.70)"}
          }
        },
        plugins:{
          legend:{labels:{color:"rgba(231,238,245,.70)"}},
          tooltip:{
            callbacks:{
              label:(ctx)=>{
                const r = ctx.raw || {};
                return `${ctx.dataset.label}: ${r.title || "Nota"}${noteLink(ctx)}`;
              }
            }
          }
        }
      }
    });

    // Donas
    new Chart(document.getElementById("donutSent"),{
      type:"doughnut",
      data:{labels:["Positivo","Neutro","Negativo"],datasets:[{data:[33,45,22]}]},
      options:{plugins:{legend:{position:"bottom",labels:{color:"rgba(231,238,245,.70)"}}}}
    });

    new Chart(document.getElementById("donutType"),{
      type:"doughnut",
      data:{labels:["Informativo","Opinión"],datasets:[{data:[85,15]}]},
      options:{plugins:{legend:{position:"bottom",labels:{color:"rgba(231,238,245,.70)"}}}}
    });

    // Nota: Chart.js time scale requiere adaptador de fechas; en implementación real,
    // integren date-fns adapter o moment adapter.
    // Aquí es mockup visual: en prod incluir el adaptador.
  </script>

  <!-- En implementación real, incluir el adaptador time:
  <script src="https://cdn.jsdelivr.net/npm/luxon@3"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-luxon@1"></script>
  -->
</body>
</html>

